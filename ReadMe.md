# Interface Architecture & Functionality

Firstly, in order to run the project, please run the following commands into a command line :
* pip3 install -r requirements.txt (in order to install all the necessary packages)
* python3 run.py (in order to launch the app)

Then, a local server is launched and you just have to open the HTTP adress specified in the terminal in a web browser.

In the project's git folder, you will find the following components :

* An "app" directory for the interface.
* Local Large Language Model (LLM) folder.
* Test scripts folder.
* `.gitignore`: Specifies which files and directories should be excluded from version control, such as the file load or local LLM.
* `requirements.txt`: Lists all required packages and their versions necessary for the project.
* `run.py`: Run this Python file to launch the web application.

## `app` Directory

### `__pycache__`
This directory contains cached files generated by Python to optimize the execution speed of your application. Editing these files is not necessary.

### `static`
The "static" directory contains static files, including the required CSS for the interface.

### `templates`
The "templates" directory is used to store the HTML template used in the interface.

#### Files in the `app` Directory

* `__init__.py`: This Python initialization file initializes the Flask application and imports routes from the "app" package.
* `global_methods.py`: This file contains global methods or functions used in the application.
    - `determine_file_type(filename)`: Determines the file type based on its extension (txt or pdf).
    - `allowed_file(filename)`: Checks if a file has an authorized extension.
    - `clean_data(text)`: Cleans data by removing special characters, links, hashtags, and converting text to lowercase.
    - `remove_stopwords(text)`: Removes stopwords from the text.
    - `process_text_file(text, output_file_path)`: Performs preprocessing on input text and saves the processed text to a file.

* `routes.py`: This file is the core of the project. It defines the routes and the main functionality of the Flask web application. It interacts with the user through a chat interface and handles file uploads, text processing, and interactions with the language model.

#### `routes.py` Structure

1. **Imports**: Includes all required packages.

2. **Language Choice**: Determines the user's language preference (French or English) to tailor the interface accordingly.

3. **File Handling**: Manages file uploads, including PDFs and text files. Uploaded files are securely saved, and the appropriate processing parameters are determined here.

    - **`chunk_size`**
    - **`chunk_overlap`**

4. **User Interaction**: The application responds to user input, handling questions and summary requests.

5. **Text Processing**: Uploaded text files undergo processing, splitting, and preparation for interactions with the language model.

6. **Language Model Integration**: The application interacts with the Hugging Face language model, offering both API and local solutions for language processing.

7. **Chat History**: A dictionary of chat messages is maintained, with 'a' representing answers from the language model and 'q' representing user questions.

* `settings.py`: Configuration settings to customize the interface:
  
    - **Language Choice**: Configure the language preference for the interface between French ("fr") and English ("en").
    - **Interface Mode**: Choose between a local interface (default) or an API-based solution.
    - **LLM Configuration**: Configure the Language Model (LLM) by specifying its name and folder location. You can also set up the embeddings model.

## `tests` Directory

### `source_documents`
This directory contains text source documents after processing by the PyPDF package.

### `preprocessed_source_documents`
Preprocessed documents used for testing: cleaned and formatted data ready to be split and stored as vectors for the large language model (LLM).

### `results` 
This directory contains 20 CSV files resulting from the "run_test.py" file. "Conclusions_results.csv" is a summary of the best parameter combinations from each test file.

Files in the `tests` Directory:

- `documents_expected_list.csv`: Contains all expected results for each query.
- `parameters.csv`: Lists all parameter combinations resulting from the "parameters_creation.py" file.
- `parameters_creation.csv`: Creates "parameters.csv" considering our parameter choices.
- `run_test.py`: Generates all test files, and the methodology is described in an accompanying document called "Analyses_tests_conclusion."
- `global_methods.py`: Used in run_test.py, described previously.
- `settings.py`: Used in run_test.py, described previously.
- `rapport_tests.docx`: A complete report of the analysis of the resulsts of the tests.
